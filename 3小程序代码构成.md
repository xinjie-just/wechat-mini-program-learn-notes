# 小程序代码构成

每个页面都包含 4 个文件。

- .json 后缀的 `JSON` 配置文件
- .wxml 后缀的 `WXML` 模板文件
- .wxss 后缀的 `WXSS` 样式文件
- .js 后缀的 `JS` 脚本逻辑文件

## 1. JSON 配置

`JSON` 是一种数据格式，并不是编程语言，在小程序中，JSON扮演的静态配置的角色。可以在项目的根目录有一个 `app.json` 和 `project.config.json`，此外在 pages/ 目录下还有一个 `page.json`。

`app.json` 是小程序配置，`project.config.json` 是微信开发者工具配置，`page.json` 是页面配置。

`JSON` 中不能有注释，只能包含五种符号：`""`，`,`，`{}`，`[]`，`：`，不能出现其他符号。

## 2. `WXML` 模板

`WXML` 和 HTML `非常相似，WXML` 由标签、属性等等构成。但是也有很多不一样的地方。

### 2.1. 标签名称

小程序的 `WXML` 用的标签是 `view`, `button`, `text` 等等，这些标签就是小程序给开发者包装好的基本能力，我们还提供了地图、视频、音频等等组件能力。

### 2.2. 多了一些 wx:if 这样的属性以及 `{{ }}` 这样的表达式

在网页的一般开发流程中，我们通常会通过 JS 操作 DOM (对应 HTML 的描述产生的树)，以引起界面的一些变化响应用户的行为。MVVM 的开发模式（例如 React, Vue），提倡把渲染和逻辑分离。简单来说就是不要再让 JS 直接操控 DOM，JS 只需要管理状态即可，然后再通过一种模板语法来描述状态和界面结构的关系即可。小程序的框架也是用到了这个思路。

`WXML` 是这么写 :

```WXML
<text>{{msg}}</text>
```

JS 只需要管理状态即可:

```JS
this.setData({ msg: "Hello World" })
```

## 3. `WXSS` 样式

`WXSS` 具有 `CSS` 大部分的特性，小程序在 `WXSS` 也做了一些扩充和修改。

1. 新增了尺寸单位。在写 CSS 样式时，开发者需要考虑到手机设备的屏幕会有不同的宽度和设备像素比，采用一些技巧来换算一些像素单位。`WXSS` 在底层支持新的尺寸单位 `rpx` ，开发者可以免去换算的烦恼，只要交给小程序底层来换算即可，由于换算采用的浮点数运算，所以运算结果会和预期结果有一点点偏差。

2. 提供了全局的样式和局部样式。和前边 `app.json`, `page.json` 的概念相同，你可以写一个 `app.wxss` 作为全局样式，会作用于当前小程序的所有页面，局部页面样式 `page.wxss` 仅对当前页面生效。

3. 此外 `WXSS` 仅支持部分 `CSS` 选择器。

## 4. JS 交互逻辑

响应用户的操作使用 JS 来完成。还可以在 JS 中调用小程序提供的丰富的 API，利用这些 API 可以很方便的调起微信提供的能力，例如获取用户信息、本地存储、微信支付等。